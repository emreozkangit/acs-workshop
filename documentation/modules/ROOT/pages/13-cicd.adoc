= ACS DevSecOps Pipelines
include::_attributes.adoc[]
:profile: acs

[#integration_demo_ocp_pipelines]
== Integration Demo - Openshift Pipelines with RHACS

This section shows how OpenShift Pipelines, based on the Tekton open source project, can be used to automate the execution of Red Hat Advanced Cluster Security for Kubernetes as part of a wider continuous integration solution.The objective is to bring into the continuous integration process the validation of Kubernetes resources such that any violations against defined policy can be addressed earlier in the development life cycle.

== RHACS Command Line Interface

Red Hat Advanced Cluster Security for Kubernetes has a command line interface (roxctl) for the evaluation of images and resources against policy definitions held on the RHACS server. The command line interface may be downloaded from the RHACS web user interface for ad-hoc use, roxctl is downloaded from the RHACS server during each execution of the analysis. This ensures that the correct version matching the server is always used.

=== Roxctl Analysis Options

The roxctl command line interface has a number of options for resource and image analysis. Of particular interest in this section is the “deployment” option, which traditionally is used to check for deployment readiness of Kubernetes resources. By using this option during the build phase of development, teams can get a much earlier indication of deployment issues rather than waiting until deployment time. This enables teams to fix the problems during development, which will lower costs and lead to smoother deployments.


On your own demo environment, Red Hat deployed a pipeline example. Let's examine.

. Login your OpenShift Console and change your view to Administrator

. Click ``Pipelines`` and ``Pipeline Runs`` section as shown below. 

NOTE: Project should be ``stackrox-pipeline-demo``
 
image::cicd/00_pipeline.png[ACS Cicd 1, 800]

. Click one of the ``Failed`` Pipeline Runs

image::cicd/01_pipeline.png[ACS Cicd 2, 800]

. Now, you can see some summary of your Pipeline at the right down side.

image::cicd/02_pipeline.png[ACS Cicd 3, 800]

. Looking closer at the detail of the tasks in the pipeline, and examining the output of the “deploy-check” task shows that more files have been examined as shown below.

image::cicd/03_pipeline.png[ACS Cicd 4, 800]

